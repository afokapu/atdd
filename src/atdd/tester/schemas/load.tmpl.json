{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Load Test Harness Template",
  "description": "Template for load/performance tests using k6",
  "language": "javascript",
  "framework": "k6",
  "category": "integration",
  "template": "\n// URN: {urn}\nimport http from 'k6/http';\nimport {{ check, sleep }} from 'k6';\n\nexport const options = {{\n  vus: {vus},\n  duration: '{duration}',\n  thresholds: {{\n    http_req_duration: ['p(95)<{threshold_ms}'],\n  }},\n}};\n\nexport default function() {{\n  // Given\n  {given_setup}\n\n  // When\n  const response = http.{method}('{url}', {params});\n\n  // Then\n  check(response, {{\n    'status is {expected_status}': (r) => r.status === {expected_status},\n    {additional_checks}\n  }});\n\n  sleep(1);\n}}\n",
  "variables": [
    "urn",
    "vus",
    "duration",
    "threshold_ms",
    "given_setup",
    "method",
    "url",
    "params",
    "expected_status",
    "additional_checks",
    "wagon",
    "feature",
    "wmbt_id",
    "nnn",
    "slug",
    "layer",
    "train_id"
  ],
  "header_template": {
    "acceptance": "// URN: test:{wagon}:{feature}:{wmbt_id}-LOAD-{nnn}-{slug}\n// Acceptance: acc:{wagon}:{wmbt_id}-LOAD-{nnn}[-{slug}]\n// WMBT: wmbt:{wagon}:{wmbt_id}\n// Phase: RED\n// Layer: {layer}\n",
    "journey": "// URN: test:train:{train_id}:LOAD-{nnn}-{slug}\n// Train: train:{train_id}\n// Phase: RED\n// Layer: assembly\n"
  }
}
